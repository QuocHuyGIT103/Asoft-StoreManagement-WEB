@model StoreManagementSystem.Models.Invoice
@{
    ViewBag.Title = "Sửa Hóa Đơn";
}
<div class="container mx-auto p-6 bg-white shadow-lg rounded-lg mt-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Sửa Thông Tin Hóa Đơn</h2>
    
    @if (!string.IsNullOrEmpty(ViewBag.Message))
    {
        <div class="alert bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4" role="alert">
            @ViewBag.Message
        </div>
    }

    <form method="post" action="@Url.Action("Edit", new { id = Model.InvoiceID })" class="space-y-6">
        <div class="form-group">
            <label for="InvoiceID" class="block text-sm font-medium text-gray-700">Mã Hóa Đơn <span class="text-gray-500">(Không thể chỉnh sửa)</span></label>
            <input type="text" 
                   name="InvoiceID" 
                   id="InvoiceID" 
                   class="mt-1 block w-full border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"
                   value="@Model.InvoiceID" 
                   readonly />
        </div>
        <div class="form-group">
            <label for="CustomerID" class="block text-sm font-medium text-gray-700">Khách Hàng <span class="text-red-500">*</span></label>
            <select name="CustomerID" 
                    id="CustomerID" 
                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                    required>
                @foreach (System.Data.DataRow row in ViewBag.Customers.Rows)
                {
                    <option value="@row["CustomerID"]" @(row["CustomerID"].ToString() == Model.CustomerID ? "selected" : "")>@row["CustomerName"]</option>
                }
            </select>
        </div>
        <div class="form-group">
            <label for="InvoiceDate" class="block text-sm font-medium text-gray-700">Ngày Lập <span class="text-red-500">*</span></label>
            <input type="date" 
                   name="InvoiceDate" 
                   id="InvoiceDate" 
                   class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                   value="@Model.InvoiceDate.ToString("yyyy-MM-dd")" 
                   required />
        </div>
        <div class="form-group">
            <label for="TotalPrice" class="block text-sm font-medium text-gray-700">Tổng Tiền <span class="text-gray-500">(Không thể chỉnh sửa)</span></label>
            <input type="text" 
                   name="TotalPrice" 
                   id="TotalPrice" 
                   class="mt-1 block w-full border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"
                   value="@Model.TotalPrice.ToString("N0")" 
                   readonly />
        </div>
        <div class="flex space-x-4">
            <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                Lưu
            </button>
            <a href="@Url.Action("List")" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                Hủy
            </a>
        </div>
    </form>
</div>